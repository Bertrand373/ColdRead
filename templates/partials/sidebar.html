<!-- ============================================
     UNIVERSAL SIDEBAR PARTIAL
     Include in pages: {% include 'partials/sidebar.html' %}
     
     Required: Set 'active_page' variable before including:
     {% set active_page = 'dashboard' %}  (or 'call', 'resources', 'settings')
     ============================================ -->

<aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
        <img src="/static/favicon.svg" alt="Coachd">
    </div>
    
    <nav class="sidebar-nav">
        <!-- Normal nav (shown when NOT in call) -->
        <div class="sidebar-nav-normal">
            <a href="/" class="nav-item {{ 'active' if active_page == 'dashboard' else '' }}" data-tooltip="Dashboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
            </a>
            <a href="/call" class="nav-item {{ 'active' if active_page == 'call' else '' }}" data-tooltip="Live Call">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
            </a>
            <button class="nav-item" data-tooltip="Ask" onclick="openChat && openChat()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
            </button>
            <a href="#" class="nav-item {{ 'active' if active_page == 'resources' else '' }}" data-tooltip="Resources">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>
            </a>
        </div>
        
        <!-- Call nav (shown DURING call) - only relevant on /call page -->
        <div class="sidebar-nav-call">
            <button class="nav-item" id="sidebarTranscriptBtn" data-tooltip="Transcript" onclick="typeof Coachd !== 'undefined' && Coachd.toggleSlidePanel && Coachd.toggleSlidePanel('transcript')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
                <span class="nav-badge empty" id="sidebarTranscriptBadge">0</span>
            </button>
            <button class="nav-item" id="sidebarHistoryBtn" data-tooltip="History" onclick="typeof Coachd !== 'undefined' && Coachd.toggleSlidePanel && Coachd.toggleSlidePanel('history')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                <span class="nav-badge empty" id="sidebarHistoryBadge">0</span>
            </button>
        </div>
    </nav>
    
    <div class="sidebar-footer">
        <!-- Normal footer (shown when NOT in call) -->
        <div class="sidebar-footer-normal">
            <a href="#" class="nav-item {{ 'active' if active_page == 'settings' else '' }}" data-tooltip="Settings">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
            </a>
            <div class="user-avatar" id="userAvatar">A</div>
        </div>
        
        <!-- Call footer (shown DURING call) -->
        <div class="sidebar-footer-call">
            <button class="nav-item danger" data-tooltip="End Call" onclick="typeof Coachd !== 'undefined' && Coachd.endCall && Coachd.endCall()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.68 13.31a16 16 0 003.41 2.6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7 2 2 0 011.72 2v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 002.59 3.4z"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
            </button>
        </div>
    </div>
</aside>
